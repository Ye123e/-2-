# Android系统修复工具 - 快速使用指南

## 🚀 快速开始

### 1. 安全启动程序

**推荐方式**：使用安全启动脚本
```bash
python start_safe.py
```

这个脚本会：
- ✅ 自动检查系统环境
- ✅ 检测缺失的依赖包
- ✅ 创建必需的目录
- ✅ 生成默认配置文件
- ✅ 提供详细的使用指导

**传统方式**：直接启动
```bash
python main.py
```

### 2. 解决常见启动问题

#### 问题1: 程序闪退或启动失败

**解决方案**：
1. 使用安全启动脚本：`python start_safe.py`
2. 按照提示安装缺失的依赖包
3. 确保Python版本 >= 3.8

**详细步骤**：
```bash
# 1. 检查Python版本
python --version

# 2. 安装所有依赖
pip install -r requirements.txt

# 3. 如果上述命令失败，逐个安装核心包
pip install requests psutil Pillow adb-shell

# 4. 重新启动程序
python start_safe.py
```

#### 问题2: 找不到ADB工具

**解决方案**：
1. 下载Android SDK Platform Tools
   - 访问：https://developer.android.com/studio/releases/platform-tools
   - 下载适合您系统的版本

2. 安装和配置
   ```bash
   # Windows
   # 解压到 C:\platform-tools
   # 添加 C:\platform-tools 到PATH环境变量
   
   # Linux/macOS
   # 解压到 /opt/platform-tools 或 ~/platform-tools
   # 添加到PATH: export PATH=$PATH:/path/to/platform-tools
   ```

3. 验证安装
   ```bash
   adb version
   ```

#### 问题3: 权限不足

**解决方案**：
- Windows: 右键选择"以管理员身份运行"
- Linux/macOS: 使用 `sudo python start_safe.py`

## 📱 设备连接指南

### 准备Android设备

#### 步骤1: 启用开发者选项
1. 进入 **设置** → **关于手机**
2. 连续点击 **"版本号"** 7次
3. 看到提示 **"您现在是开发者"** 即可

#### 步骤2: 启用USB调试
1. 进入 **设置** → **开发者选项**
2. 打开 **"USB调试"** 开关
3. 打开 **"USB安装"** 开关 (可选，用于应用安装)

#### 步骤3: 连接设备
1. 使用 **USB数据线** 连接手机和电脑
2. 手机屏幕会弹出 **USB调试授权** 对话框
3. 点击 **"允许"** 并勾选 **"始终允许来自此计算机"**

#### 步骤4: 验证连接
```bash
# 在命令行中运行
adb devices

# 应该显示类似输出:
# List of devices attached
# 1234567890ABCDEF    device
```

### 连接问题排除

#### 设备未显示
- 更换USB数据线
- 尝试不同的USB端口
- 重启ADB服务：`adb kill-server && adb start-server`

#### 显示为"unauthorized"
- 在手机上重新授权USB调试
- 撤销USB调试授权后重新连接

#### 显示为"offline"
- 断开重新连接设备
- 重启手机和电脑

## 🔧 主要功能使用

### 1. 设备管理
- **自动检测**: 程序启动后自动扫描连接的设备
- **设备信息**: 显示设备型号、Android版本、存储信息等
- **连接状态**: 实时监控设备连接状态

### 2. 系统诊断
- **健康检查**: 全面检查系统健康状态
- **存储分析**: 分析存储空间使用情况
- **文件完整性**: 检测系统文件完整性
- **权限分析**: 检查应用权限配置

**使用方法**：
1. 连接设备后，点击 **"系统诊断"** 选项卡
2. 点击 **"开始诊断"** 按钮
3. 等待诊断完成，查看详细报告

### 3. 安全扫描
- **病毒检测**: 检测已知恶意软件
- **可疑应用**: 识别可疑应用行为
- **权限异常**: 发现异常权限请求

**使用方法**：
1. 点击 **"安全扫描"** 选项卡
2. 选择扫描类型：快速扫描 或 深度扫描
3. 点击 **"开始扫描"** 按钮
4. 查看扫描结果和处理建议

### 4. 文件清理
- **缓存清理**: 清理应用缓存文件
- **临时文件**: 删除系统临时文件
- **日志清理**: 清理过期日志文件
- **重复文件**: 找出并处理重复文件

**使用方法**：
1. 点击 **"文件清理"** 选项卡
2. 选择要清理的项目类型
3. 点击 **"扫描"** 查看可清理项目
4. 选择要清理的项目，点击 **"清理"**

### 5. 系统修复
- **资源修复**: 修复丢失的系统资源
- **文件恢复**: 恢复损坏的系统文件
- **一键修复**: 自动修复常见问题

**使用方法**：
1. 点击 **"系统修复"** 选项卡
2. 点击 **"检测问题"** 扫描系统问题
3. 查看检测结果，选择修复方案
4. 点击 **"开始修复"** 执行修复操作

## ⚠️ 注意事项

### 安全须知
1. **备份重要数据**：修复操作前请备份重要数据
2. **保持连接**：操作过程中请保持设备连接稳定
3. **电量充足**：确保设备电量充足（建议>50%）
4. **关闭杀毒软件**：可能误报ADB操作为恶意行为

### 权限说明
- 本工具需要 **USB调试** 权限连接设备
- 部分功能需要 **Root权限** 才能执行
- 所有操作都会记录日志，可在 `logs/` 目录查看

### 兼容性
- **Android版本**: 支持Android 4.4及以上版本
- **设备类型**: 支持手机、平板、电视盒子等Android设备
- **操作系统**: 支持Windows、Linux、macOS

## 🆘 故障排除

### 常见错误及解决方案

#### "ImportError: No module named 'xxx'"
```bash
# 安装缺失的模块
pip install 模块名

# 或重新安装所有依赖
pip install -r requirements.txt
```

#### "adb: command not found"
1. 下载Android SDK Platform Tools
2. 添加到系统PATH环境变量
3. 重启命令行窗口

#### "device offline"
1. 断开设备重新连接
2. 重启ADB：`adb kill-server && adb start-server`
3. 重启设备

#### "permission denied"
1. 在手机上重新授权USB调试
2. 以管理员身份运行程序
3. 检查USB数据线是否支持数据传输

#### 程序界面无响应
1. 检查设备连接状态
2. 等待操作完成（某些操作需要较长时间）
3. 如果长时间无响应，重启程序

### 获取帮助

#### 日志文件
程序运行日志保存在 `logs/app.log`，包含详细的错误信息。

#### 联系方式
如果遇到无法解决的问题，请：
1. 查看日志文件 `logs/app.log`
2. 记录详细的错误信息
3. 注明您的系统环境（操作系统、Python版本等）

## 📋 快速参考

### 常用命令
```bash
# 启动程序（推荐）
python start_safe.py

# 启动程序（直接）
python main.py

# 检查ADB连接
adb devices

# 重启ADB服务
adb kill-server && adb start-server

# 安装依赖
pip install -r requirements.txt
```

### 目录结构
```
android-system-repair-tool/
├── start_safe.py          # 安全启动脚本
├── main.py               # 主程序
├── config.ini            # 配置文件
├── requirements.txt      # 依赖包列表
├── logs/                 # 日志文件
├── data/                 # 数据文件
└── backups/              # 备份文件
```

### 配置文件说明
配置文件 `config.ini` 包含程序的各种设置，首次运行时会自动创建默认配置。

主要配置项：
- `[logging]` - 日志设置
- `[adb]` - ADB连接设置  
- `[gui]` - 界面设置
- `[paths]` - 路径设置

---

**提示**: 如果这个指南没有解决您的问题，请运行 `python start_safe.py`，脚本会自动检测并提供针对性的解决方案。